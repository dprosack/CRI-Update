{"remainingRequest":"C:\\Users\\DPROSACK\\Documents\\GitHub\\CRI-Update\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\DPROSACK\\Documents\\GitHub\\CRI-Update\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\DPROSACK\\Documents\\GitHub\\CRI-Update\\src\\components\\Map\\editFunc.js","dependencies":[{"path":"C:\\Users\\DPROSACK\\Documents\\GitHub\\CRI-Update\\src\\components\\Map\\editFunc.js","mtime":1642817634522},{"path":"C:\\Users\\DPROSACK\\Documents\\GitHub\\CRI-Update\\babel.config.js","mtime":1642552726370},{"path":"C:\\Users\\DPROSACK\\Documents\\GitHub\\CRI-Update\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641423715596},{"path":"C:\\Users\\DPROSACK\\Documents\\GitHub\\CRI-Update\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\DPROSACK\\Documents\\GitHub\\CRI-Update\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxVc2Vyc1xcRFBST1NBQ0tcXERvY3VtZW50c1xcR2l0SHViXFxDUkktVXBkYXRlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiOwovL2ltcG9ydCBjb25zdCBmcm9tIG1hcC5qcwppbXBvcnQgeyBza2V0Y2gsIHZpZXcsIGZlYXRMYXllciwgZ0xheWVyLCBjb3VudHlPZmZpY2lhbEluZm8gfSBmcm9tICcuLi9NYXAvbWFwJzsKaW1wb3J0IHsgY250eU5ick5tIH0gZnJvbSAnLi4vLi4vY29tbW9uL3R4Q250JzsKaW1wb3J0IHsgcm9hZEluZm8gfSBmcm9tICcuLi8uLi9zdG9yZSc7IC8vZXNyaSBqcyBnZW9tZXRyeSBlbmdpbmUgaW1wb3J0CgppbXBvcnQgKiBhcyBnZW9tZXRyeUVuZ2luZSBmcm9tICJAYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvZ2VvbWV0cnlFbmdpbmUiOwppbXBvcnQgR3JhcGhpYyBmcm9tICJAYXJjZ2lzL2NvcmUvR3JhcGhpYyI7CmltcG9ydCBRdWVyeSBmcm9tICJAYXJjZ2lzL2NvcmUvcmVzdC9zdXBwb3J0L1F1ZXJ5IjsgLy9hZGQgbG9naW4gaW5mbwovL2dldCBjb3VudHkgbmFtZSBhbmQgcm9hZCB0b3RhbHMKCmV4cG9ydCBmdW5jdGlvbiBjb3VudHlJbmZvKCkgewogIHJldHVybiBfY291bnR5SW5mby5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfY291bnR5SW5mbygpIHsKICBfY291bnR5SW5mbyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgIHZhciBjb3VudHlJbmZvUHJvbWlzZSwgY291bnR5SW5mb1JldHVybjsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgY291bnR5SW5mb1Byb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgdmFyIHF1ZXJ5VXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7CiAgICAgICAgICAgICAgdmFyIGNySW5mbyA9IHF1ZXJ5VXJsLnNwbGl0KCdodHRwOi8vbG9jYWxob3N0OjgwODAvJylbMV07IC8vY29uc29sZS5sb2coY3JJbmZvLnRvU3RyaW5nKCkpCgogICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY250eU5ick5tLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjbnR5TmJyTm1bal1bY3JJbmZvXSk7CgogICAgICAgICAgICAgICAgaWYgKGNudHlOYnJObVtqXVtjckluZm9dKSB7CiAgICAgICAgICAgICAgICAgIHZhciB3aGVyZVN0YXRlbWVudCA9ICJDb3VudHlfTkJSID0gJyIuY29uY2F0KGNySW5mbywgIiciKTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cod2hlcmVTdGF0ZW1lbnQpOwogICAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBuZXcgUXVlcnkoKTsKICAgICAgICAgICAgICAgICAgcXVlcnkud2hlcmUgPSB3aGVyZVN0YXRlbWVudDsKICAgICAgICAgICAgICAgICAgcXVlcnkub3V0RmllbGRzID0gWyIqIl07CiAgICAgICAgICAgICAgICAgIHZhciBuZXdRdWVyeSA9IGNvdW50eU9mZmljaWFsSW5mby5xdWVyeUZlYXR1cmVzKHF1ZXJ5KTsKICAgICAgICAgICAgICAgICAgcmVzKHsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBuYnI6IHBhcnNlSW50KGNySW5mbyksCiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IG5ld1F1ZXJ5CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVzKHsKICAgICAgICAgICAgICAgICAgICByZXNwb25zZTogZmFsc2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSAvL2xldCBjclZhbGlkYXRpb24gPSAvXlswLTldezEsM30kLwoKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gY291bnR5SW5mb1Byb21pc2U7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjb3VudHlJbmZvUmV0dXJuID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgY291bnR5SW5mb1JldHVybik7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX2NvdW50eUluZm8uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGFkZFJvYWRiZWQoKSB7CiAgcmV0dXJuIF9hZGRSb2FkYmVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9hZGRSb2FkYmVkKCkgewogIF9hZGRSb2FkYmVkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBza2V0Y2guY3JlYXRlKCJwb2x5bGluZSIsIHsKICAgICAgICAgICAgICAgIG1vZGU6ICJjbGljayIsCiAgICAgICAgICAgICAgICBoYXNaOiBmYWxzZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHNrZXRjaC5vbignY3JlYXRlJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoTWlsZXM7CgogICAgICAgICAgICAgICAgaWYgKGV2ZW50LnN0YXRlID09PSAiY29tcGxldGUiKSB7CiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coIlRoaXMgaXMgdGhlIHByZXZpb3VzIHRvdGFsIGxlbmd0aDogIix0aGlzLnByZXZpb3VzVG90YWwpCiAgICAgICAgICAgICAgICAgIGxlbmd0aE1pbGVzID0gZ2VvbWV0cnlFbmdpbmUuZ2VvZGVzaWNMZW5ndGgoZXZlbnQuZ3JhcGhpYy5nZW9tZXRyeSwgIm1pbGVzIik7IC8vYWRkTGVuKGxlbmd0aE1pbGVzKTsKCiAgICAgICAgICAgICAgICAgIC8vYWRkTGVuKGxlbmd0aE1pbGVzKTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIlRoaXMgaXMgdGhlIGN1cnJlbnQgbGluZSBsZW5ndGg6ICIsIHBhcnNlRmxvYXQobGVuZ3RoTWlsZXMudG9GaXhlZCgzKSkpOwogICAgICAgICAgICAgICAgICByZXMobGVuZ3RoTWlsZXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMik7CiAgfSkpOwogIHJldHVybiBfYWRkUm9hZGJlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpleHBvcnQgZnVuY3Rpb24gbW9kaWZ5Um9hZGJlZChfeCkgewogIHJldHVybiBfbW9kaWZ5Um9hZGJlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfbW9kaWZ5Um9hZGJlZCgpIHsKICBfbW9kaWZ5Um9hZGJlZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoYm9vbCkgewogICAgdmFyIHByb21pc2UsIGZlYXR1cmU7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHZpZXcub24oImltbWVkaWF0ZS1jbGljayIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgdmFyIG9wdHMgPSB7CiAgICAgICAgICAgICAgICAgIGluY2x1ZGU6IGZlYXRMYXllcgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZpZXcuaGl0VGVzdChldmVudCwgb3B0cykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS5yZXN1bHRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3VsdHNbaV0uZ3JhcGhpYy5nZW9tZXRyeSAhPT0gbnVsbCAmJiByZXNwb25zZS5yZXN1bHRzW2ldLmdyYXBoaWMuc291cmNlTGF5ZXIgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeUZlYXQgPSBmZWF0TGF5ZXIucXVlcnlGZWF0dXJlcyh7CiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdElkczogW3Jlc3BvbnNlLnJlc3VsdHNbMF0uZ3JhcGhpYy5hdHRyaWJ1dGVzLm9iamVjdGlkXSwKICAgICAgICAgICAgICAgICAgICAgICAgb3V0RmllbGRzOiBbIioiXSwKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuR2VvbWV0cnk6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybk06IHRydWUKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgcXVlcnlGZWF0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzKHJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGZlYXR1cmUgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgZGVmaW5lR3JhcGhpYyhmZWF0dXJlLCBib29sKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGZlYXR1cmUpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTMpOwogIH0pKTsKICByZXR1cm4gX21vZGlmeVJvYWRiZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHpvb21FeHRlbnRzKCkgewogIHZpZXcub24oJ21vdXNlLXdoZWVsJywgZnVuY3Rpb24gKCkgewogICAgY29uc29sZS5sb2codmlldy56b29tKTsKICAgIHZpZXcuem9vbSA8IDkgPyBmZWF0TGF5ZXIudmlzaWJsZSA9IGZhbHNlIDogZmVhdExheWVyLnZpc2libGUgPSB0cnVlOwogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBoaWdodGxpZ2h0RmVhdCgpIHsKICB2aWV3Lm9uKCdwb2ludGVyLW1vdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIHZhciBvcHRzID0gewogICAgICBpbmNsdWRlOiBmZWF0TGF5ZXIKICAgIH07CiAgICB2aWV3LmhpdFRlc3QoZXZlbnQsIG9wdHMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIGlmIChyZXNwb25zZS5yZXN1bHRzLmxlbmd0aCkgewogICAgICAgIHZhciBlZGl0RmVhdHVyZSA9IHJlc3BvbnNlLnJlc3VsdHNbMF0uZ3JhcGhpYzsKICAgICAgICB2aWV3LndoZW5MYXllclZpZXcoZWRpdEZlYXR1cmUubGF5ZXIpLnRoZW4oZnVuY3Rpb24gKGxheWVyVmlldykgewogICAgICAgICAgdmFyIGhpZ2hsaWdodCA9IGxheWVyVmlldy5oaWdobGlnaHQoZWRpdEZlYXR1cmUpOwogICAgICAgICAgdmlldy5vbigncG9pbnRlci1tb3ZlJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgIHZpZXcuaGl0VGVzdChldmVudCwgb3B0cykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UucmVzdWx0cy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIGhpZ2hsaWdodC5yZW1vdmUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0pOwp9CgpmdW5jdGlvbiBkZWZpbmVHcmFwaGljKGdyYXBoaWNzLCBkdXBzKSB7CiAgaWYgKGR1cHMgPT09IHRydWUpIHsKICAgIHZhciBuZXdHcmFwaGljID0gbmV3IEdyYXBoaWMoewogICAgICBnZW9tZXRyeTogewogICAgICAgIHR5cGU6ICJwb2x5bGluZSIsCiAgICAgICAgcGF0aHM6IGdyYXBoaWNzLmZlYXR1cmVzWzBdLmdlb21ldHJ5LnBhdGhzWzBdLAogICAgICAgIGhhc006IHRydWUsCiAgICAgICAgc3BhdGlhbFJlZmVyZW5jZTogewogICAgICAgICAgd2tpZDogMzg1NwogICAgICAgIH0KICAgICAgfSwKICAgICAgYXR0cmlidXRlczogewogICAgICAgIG9iamVjdGlkOiBncmFwaGljcy5mZWF0dXJlc1swXS5hdHRyaWJ1dGVzLm9iamVjdGlkLAogICAgICAgIHJvYWRiZWROYW1lOiBncmFwaGljcy5mZWF0dXJlc1swXS5hdHRyaWJ1dGVzLnN0cmVldF9ubSwKICAgICAgICByb2FkYmVkRGVzaWduOiBncmFwaGljcy5mZWF0dXJlc1swXS5hdHRyaWJ1dGVzLmRlc2lnbiwKICAgICAgICByb2FkYmVkU3VyZmFjZTogZ3JhcGhpY3MuZmVhdHVyZXNbMF0uYXR0cmlidXRlcy5zdXJmYWNlLAogICAgICAgIG51bUxhbmU6IGdyYXBoaWNzLmZlYXR1cmVzWzBdLmF0dHJpYnV0ZXMubnVtX2xhbmVzLAogICAgICAgIGJlZ2luRGZvOiBncmFwaGljcy5mZWF0dXJlc1swXS5hdHRyaWJ1dGVzLmJlZ2luX2RmbywKICAgICAgICBlbmREZm86IGdyYXBoaWNzLmZlYXR1cmVzWzBdLmF0dHJpYnV0ZXMuZW5kX2RmbwogICAgICB9LAogICAgICBzeW1ib2w6IHsKICAgICAgICB0eXBlOiAic2ltcGxlLWxpbmUiLAogICAgICAgIGNvbG9yOiBbMCwgMCwgMjU1XSwKICAgICAgICB3aWR0aDogMiwKICAgICAgICBzdHlsZTogImRhc2giCiAgICAgIH0KICAgIH0pOwogICAgdmFyIG9iamVjdGlkTGlzdCA9IFtdOwogICAgZ0xheWVyLmdyYXBoaWNzLmFkZChuZXdHcmFwaGljKTsKCiAgICBmb3IgKHZhciBpZCBpbiBnTGF5ZXIuZ3JhcGhpY3MuaXRlbXMpIHsKICAgICAgaWYgKGdMYXllci5ncmFwaGljcy5pdGVtc1tpZF0uYXR0cmlidXRlcyAhPT0gbnVsbCkgewogICAgICAgIG9iamVjdGlkTGlzdC5wdXNoKGdMYXllci5ncmFwaGljcy5pdGVtc1tpZF0uYXR0cmlidXRlcy5vYmplY3RpZCk7CiAgICAgIH0KICAgIH0KCiAgICBmZWF0TGF5ZXIuZGVmaW5pdGlvbkV4cHJlc3Npb24gPSAiT0JKRUNUSUQgbm90IGluICgiLmNvbmNhdChvYmplY3RpZExpc3QsICIpIGFuZCBjbnR5X25tID0gJyIpLmNvbmNhdChncmFwaGljcy5mZWF0dXJlc1swXS5hdHRyaWJ1dGVzLmNudHlfbm0sICInIik7CiAgfQp9CgpleHBvcnQgZnVuY3Rpb24gdXBkYXRlTGVuZ3RoKCkgewogIHJldHVybiBfdXBkYXRlTGVuZ3RoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF91cGRhdGVMZW5ndGgoKSB7CiAgX3VwZGF0ZUxlbmd0aCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICB2YXIgb2xkbGVuZ3RoTWlsZSwgdXBkYXRlUHJvbWlzZSwgbWlsZWFnZXM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB1cGRhdGVQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIHZpZXcub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2dCkgewogICAgICAgICAgICAgICAgdmFyIG9wdHMgPSB7CiAgICAgICAgICAgICAgICAgIGluY2x1ZGU6IGdMYXllcgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZpZXcuaGl0VGVzdChldnQsIG9wdHMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZXN1bHRzLmxlbmd0aCAmJiByZXNwb25zZS5yZXN1bHRzWzBdLmdyYXBoaWMuYXR0cmlidXRlcyAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIG9sZGxlbmd0aE1pbGUgPSBnZW9tZXRyeUVuZ2luZS5nZW9kZXNpY0xlbmd0aChyZXNwb25zZS5yZXN1bHRzWzBdLmdyYXBoaWMuZ2VvbWV0cnksICJtaWxlcyIpOwogICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHJlc3BvbnNlLnJlc3VsdHNbMF0uZ3JhcGhpYy5hdHRyaWJ1dGVzWydvYmplY3RpZCddOwogICAgICAgICAgICAgICAgICAgIHNrZXRjaC51cGRhdGUocmVzcG9uc2UucmVzdWx0c1swXS5ncmFwaGljLCB7CiAgICAgICAgICAgICAgICAgICAgICB0b29sOiAicmVzaGFwZSIKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBza2V0Y2gub24oJ3VwZGF0ZScsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld2xlbmd0aE1pbGVzOwoKICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5zdGF0ZSA9PT0gImNvbXBsZXRlIiAmJiBldmVudC5ncmFwaGljc1swXS5hdHRyaWJ1dGVzWydvYmplY3RpZCddID09PSBpZCkgewogICAgICAgICAgICAgICAgICAgICAgICBuZXdsZW5ndGhNaWxlcyA9IGdlb21ldHJ5RW5naW5lLmdlb2Rlc2ljTGVuZ3RoKGV2ZW50LmdyYXBoaWNzWzBdLmdlb21ldHJ5LCAibWlsZXMiKTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9sZGxlbmd0aE1pbGUgPT09ICJudW1iZXIiICYmIHR5cGVvZiBuZXdsZW5ndGhNaWxlcyA9PT0gIm51bWJlciIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhTGVuZ3RoID0gb2xkbGVuZ3RoTWlsZSAtIG5ld2xlbmd0aE1pbGVzOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZGxlbmd0aE1pbGUgPCBuZXdsZW5ndGhNaWxlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhZGQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRsZW5ndGhNaWxlID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgICAgICAgIG5ld2xlbmd0aE1pbGVzID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZGRNaWxlcyA9IE1hdGguYWJzKGRlbHRhTGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXMoYWRkTWlsZXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9sZGxlbmd0aE1pbGUgPiBuZXdsZW5ndGhNaWxlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWInKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRsZW5ndGhNaWxlID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgICAgICAgIG5ld2xlbmd0aE1pbGVzID0gdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJNaWxlcyA9IC1NYXRoLmFicyhkZWx0YUxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzKHN1Yk1pbGVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvbGRsZW5ndGhNaWxlID09PSBuZXdsZW5ndGhNaWxlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgIG9sZGxlbmd0aE1pbGUgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3bGVuZ3RoTWlsZXMgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBza2V0Y2gudXBkYXRlKHJlc3BvbnNlLnJlc3VsdHNbMF0uZ3JhcGhpYywgewogICAgICAgICAgICAgICAgICAgICAgdG9vbDogInJlc2hhcGUiCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gdXBkYXRlUHJvbWlzZTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIG1pbGVhZ2VzID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1pbGVhZ2VzKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIG1pbGVhZ2VzKTsKCiAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWU0KTsKICB9KSk7CiAgcmV0dXJuIF91cGRhdGVMZW5ndGguYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIHN0b3BFZGl0aW5nKCkgewogIHNrZXRjaC5jYW5jZWwoKTsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0R3JhcGhpYygpIHsKICByZXR1cm4gX2dldEdyYXBoaWMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2dldEdyYXBoaWMoKSB7CiAgX2dldEdyYXBoaWMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgdmFyIGdyYXBoaWNQcm9taXNlLCByZXR1cm5BdHRyOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgZ3JhcGhpY1Byb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coInllcyIpOwogICAgICAgICAgICAgIHZpZXcub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2dCkgewogICAgICAgICAgICAgICAgdmFyIG9wdHMgPSB7CiAgICAgICAgICAgICAgICAgIGluY2x1ZGU6IGdMYXllcgogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZpZXcuaGl0VGVzdChldnQsIG9wdHMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZXN1bHRzLmxlbmd0aCAmJiByZXNwb25zZS5yZXN1bHRzWzBdLmdyYXBoaWMuYXR0cmlidXRlcyAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHJvYWRJbmZvLmdldE5hbWUgPSByZXNwb25zZS5yZXN1bHRzWzBdLmdyYXBoaWMuYXR0cmlidXRlc1sncm9hZGJlZE5hbWUnXTsKICAgICAgICAgICAgICAgICAgICByb2FkSW5mby5nZXREZXNpZ24gPSByZXNwb25zZS5yZXN1bHRzWzBdLmdyYXBoaWMuYXR0cmlidXRlc1sncm9hZGJlZERlc2lnbiddOwogICAgICAgICAgICAgICAgICAgIHJvYWRJbmZvLmdldFN1cmZhY2UgPSByZXNwb25zZS5yZXN1bHRzWzBdLmdyYXBoaWMuYXR0cmlidXRlc1sncm9hZGJlZFN1cmZhY2UnXTsKICAgICAgICAgICAgICAgICAgICByb2FkSW5mby5nZXRMYW5lID0gcmVzcG9uc2UucmVzdWx0c1swXS5ncmFwaGljLmF0dHJpYnV0ZXNbJ251bUxhbmUnXTsKICAgICAgICAgICAgICAgICAgICByb2FkSW5mby5nZXRiZWdpbkRmbyA9IHJlc3BvbnNlLnJlc3VsdHNbMF0uZ3JhcGhpYy5hdHRyaWJ1dGVzWydiZWdpbkRmbyddOwogICAgICAgICAgICAgICAgICAgIHJvYWRJbmZvLmdldGVuZERmbyA9IHJlc3BvbnNlLnJlc3VsdHNbMF0uZ3JhcGhpYy5hdHRyaWJ1dGVzWydlbmREZm8nXTsKICAgICAgICAgICAgICAgICAgICByZXMoMSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocm9hZEluZm8uZ2V0RGVzaWduKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyb2FkSW5mby5nZXRTdXJmYWNlKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBncmFwaGljUHJvbWlzZTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJldHVybkF0dHIgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHJldHVybkF0dHIpOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTUpOwogIH0pKTsKICByZXR1cm4gX2dldEdyYXBoaWMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQ=="},{"version":3,"sources":["C:/Users/DPROSACK/Documents/GitHub/CRI-Update/src/components/Map/editFunc.js"],"names":["sketch","view","featLayer","gLayer","countyOfficialInfo","cntyNbrNm","roadInfo","geometryEngine","Graphic","Query","countyInfo","countyInfoPromise","Promise","res","queryUrl","window","location","href","crInfo","split","j","length","console","log","whereStatement","query","where","outFields","newQuery","queryFeatures","response","nbr","parseInt","countyInfoReturn","addRoadbed","create","mode","hasZ","on","event","lengthMiles","state","geodesicLength","graphic","geometry","parseFloat","toFixed","modifyRoadbed","bool","promise","opts","include","hitTest","then","i","results","sourceLayer","queryFeat","objectIds","attributes","objectid","returnGeometry","returnM","result","feature","defineGraphic","zoomExtents","zoom","visible","hightlightFeat","editFeature","whenLayerView","layer","layerView","highlight","remove","graphics","dups","newGraphic","type","paths","features","hasM","spatialReference","wkid","roadbedName","street_nm","roadbedDesign","design","roadbedSurface","surface","numLane","num_lanes","beginDfo","begin_dfo","endDfo","end_dfo","symbol","color","width","style","objectidList","add","id","items","push","definitionExpression","cnty_nm","updateLength","updatePromise","evt","oldlengthMile","update","tool","newlengthMiles","deltaLength","undefined","addMiles","Math","abs","subMiles","mileages","stopEditing","cancel","getGraphic","graphicPromise","getName","getDesign","getSurface","getLane","getbeginDfo","getendDfo","returnAttr"],"mappings":";;;;;;AAAA;AACA,SAAQA,MAAR,EAAgBC,IAAhB,EAAsBC,SAAtB,EAAiCC,MAAjC,EAAyCC,kBAAzC,QAAkE,YAAlE;AACA,SAAQC,SAAR,QAAwB,oBAAxB;AACA,SAAQC,QAAR,QAAuB,aAAvB,C,CACA;;AACA,OAAO,KAAKC,cAAZ,MAAgC,sCAAhC;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,OAAOC,KAAP,MAAkB,iCAAlB,C,CAGA;AAEA;;AACA,gBAAsBC,UAAtB;AAAA;AAAA;;;wEAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AACDC,YAAAA,iBADC,GACoB,IAAIC,OAAJ,CAAY,UAASC,GAAT,EAAa;AAChD,kBAAIC,QAAQ,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAA/B;AACA,kBAAIC,MAAM,GAAGJ,QAAQ,CAACK,KAAT,CAAe,wBAAf,EAAyC,CAAzC,CAAb,CAFgD,CAGhD;;AACA,mBAAK,IAAIC,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAGf,SAAS,CAACgB,MAA5B,EAAoCD,CAAC,EAArC,EAAwC;AACtCE,gBAAAA,OAAO,CAACC,GAAR,CAAYlB,SAAS,CAACe,CAAD,CAAT,CAAaF,MAAb,CAAZ;;AACA,oBAAGb,SAAS,CAACe,CAAD,CAAT,CAAaF,MAAb,CAAH,EAAwB;AACtB,sBAAIM,cAAc,2BAAoBN,MAApB,MAAlB;AACAI,kBAAAA,OAAO,CAACC,GAAR,CAAYC,cAAZ;AACA,sBAAMC,KAAK,GAAG,IAAIhB,KAAJ,EAAd;AACAgB,kBAAAA,KAAK,CAACC,KAAN,GAAcF,cAAd;AACAC,kBAAAA,KAAK,CAACE,SAAN,GAAkB,CAAE,GAAF,CAAlB;AACA,sBAAIC,QAAQ,GAAGxB,kBAAkB,CAACyB,aAAnB,CAAiCJ,KAAjC,CAAf;AACAZ,kBAAAA,GAAG,CAAC;AAACiB,oBAAAA,QAAQ,EAAC,IAAV;AAAgBC,oBAAAA,GAAG,EAACC,QAAQ,CAACd,MAAD,CAA5B;AAAsCO,oBAAAA,KAAK,EAACG;AAA5C,mBAAD,CAAH;AACD,iBARD,MASI;AACFf,kBAAAA,GAAG,CAAC;AAACiB,oBAAAA,QAAQ,EAAC;AAAV,mBAAD,CAAH;AACD;AACF,eAlB+C,CAmBhD;;AACD,aApBwB,CADpB;AAAA;AAAA,mBAuBwBnB,iBAvBxB;;AAAA;AAuBDsB,YAAAA,gBAvBC;AAAA,6CAwBEA,gBAxBF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AA2BP,gBAAsBC,UAAtB;AAAA;AAAA;;;wEAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACU,IAAItB,OAAJ,CAAY,UAASC,GAAT,EAAa;AAClCb,cAAAA,MAAM,CAACmC,MAAP,CAAc,UAAd,EAAyB;AAACC,gBAAAA,IAAI,EAAC,OAAN;AAAeC,gBAAAA,IAAI,EAAE;AAArB,eAAzB;AACArC,cAAAA,MAAM,CAACsC,EAAP,CAAU,QAAV,EAAoB,UAACC,KAAD,EAAW;AAC3B,oBAAIC,WAAJ;;AACA,oBAAGD,KAAK,CAACE,KAAN,KAAgB,UAAnB,EAA8B;AAC1B;AACAD,kBAAAA,WAAW,GAAGjC,cAAc,CAACmC,cAAf,CAA8BH,KAAK,CAACI,OAAN,CAAcC,QAA5C,EAAsD,OAAtD,CAAd,CAF0B,CAG1B;;AAAA;AACAtB,kBAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ,EAAiDsB,UAAU,CAACL,WAAW,CAACM,OAAZ,CAAoB,CAApB,CAAD,CAA3D;AACAjC,kBAAAA,GAAG,CAAC2B,WAAD,CAAH;AACH;AACJ,eATD;AAUH,aAZY,CADV;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAgBP,gBAAsBO,aAAtB;AAAA;AAAA;;;2EAAO,kBAA6BC,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AACDC,YAAAA,OADC,GACS,IAAIrC,OAAJ,CAAY,UAASC,GAAT,EAAa;AACrCZ,cAAAA,IAAI,CAACqC,EAAL,CAAQ,iBAAR,EAA2B,UAACC,KAAD,EAAW;AACpC,oBAAIW,IAAI,GAAG;AAAEC,kBAAAA,OAAO,EAAEjD;AAAX,iBAAX;AACAD,gBAAAA,IAAI,CAACmD,OAAL,CAAab,KAAb,EAAoBW,IAApB,EAA0BG,IAA1B,CAA+B,UAASvB,QAAT,EAAkB;AAC/C,uBAAI,IAAIwB,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAGxB,QAAQ,CAACyB,OAAT,CAAiBlC,MAAlC,EAA0CiC,CAAC,EAA3C,EAA8C;AAC5C,wBAAGxB,QAAQ,CAACyB,OAAT,CAAiBD,CAAjB,EAAoBX,OAApB,CAA4BC,QAA5B,KAAyC,IAAzC,IAAiDd,QAAQ,CAACyB,OAAT,CAAiBD,CAAjB,EAAoBX,OAApB,CAA4Ba,WAA5B,KAA4C,IAAhG,EAAqG;AACnG,0BAAIC,SAAS,GAAGvD,SAAS,CAAC2B,aAAV,CAAwB;AACtC6B,wBAAAA,SAAS,EAAE,CAAC5B,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAApB,CAA4BgB,UAA5B,CAAuCC,QAAxC,CAD2B;AAEtCjC,wBAAAA,SAAS,EAAE,CAAC,GAAD,CAF2B;AAGtCkC,wBAAAA,cAAc,EAAE,IAHsB;AAItCC,wBAAAA,OAAO,EAAE;AAJ6B,uBAAxB,CAAhB;AAMAL,sBAAAA,SAAS,CAACJ,IAAV,CAAe,UAAAU,MAAM;AAAA,+BAAIlD,GAAG,CAACkD,MAAD,CAAP;AAAA,uBAArB;AACD;AACF;AACF,iBAZD;AAaD,eAfD;AAgBD,aAjBa,CADT;AAAA;AAAA,mBAoBed,OApBf;;AAAA;AAoBDe,YAAAA,OApBC;AAqBLC,YAAAA,aAAa,CAACD,OAAD,EAAShB,IAAT,CAAb;AArBK,8CAsBEgB,OAtBF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAyBP,OAAO,SAASE,WAAT,GAAsB;AAC3BjE,EAAAA,IAAI,CAACqC,EAAL,CAAQ,aAAR,EAAsB,YAAM;AAC1BhB,IAAAA,OAAO,CAACC,GAAR,CAAYtB,IAAI,CAACkE,IAAjB;AACAlE,IAAAA,IAAI,CAACkE,IAAL,GAAY,CAAZ,GAAiBjE,SAAS,CAACkE,OAAV,GAAoB,KAArC,GAA6ClE,SAAS,CAACkE,OAAV,GAAoB,IAAjE;AACD,GAHD;AAID;AAED,OAAO,SAASC,cAAT,GAAyB;AAC9BpE,EAAAA,IAAI,CAACqC,EAAL,CAAQ,cAAR,EAAwB,UAACC,KAAD,EAAW;AACjC,QAAMW,IAAI,GAAG;AAACC,MAAAA,OAAO,EAAEjD;AAAV,KAAb;AACAD,IAAAA,IAAI,CAACmD,OAAL,CAAab,KAAb,EAAoBW,IAApB,EAA0BG,IAA1B,CAA+B,UAASvB,QAAT,EAAkB;AAC/C,UAAIA,QAAQ,CAACyB,OAAT,CAAiBlC,MAArB,EAA6B;AAC3B,YAAIiD,WAAW,GAAGxC,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAAtC;AACA1C,QAAAA,IAAI,CAACsE,aAAL,CAAmBD,WAAW,CAACE,KAA/B,EAAsCnB,IAAtC,CAA2C,UAASoB,SAAT,EAAmB;AAC5D,cAAIC,SAAS,GAAGD,SAAS,CAACC,SAAV,CAAoBJ,WAApB,CAAhB;AACArE,UAAAA,IAAI,CAACqC,EAAL,CAAQ,cAAR,EAAwB,UAACC,KAAD,EAAW;AACjCtC,YAAAA,IAAI,CAACmD,OAAL,CAAab,KAAb,EAAoBW,IAApB,EAA0BG,IAA1B,CAA+B,UAASvB,QAAT,EAAkB;AAC/C,kBAAGA,QAAQ,CAACyB,OAAT,CAAiBlC,MAAjB,KAA4B,CAA/B,EAAiC;AAC/BqD,gBAAAA,SAAS,CAACC,MAAV;AACD;AACF,aAJD;AAKD,WAND;AAOD,SATD;AAUD;AACF,KAdD;AAeD,GAjBD;AAkBD;;AAED,SAASV,aAAT,CAAuBW,QAAvB,EAAiCC,IAAjC,EAAsC;AACpC,MAAIA,IAAI,KAAK,IAAb,EAAkB;AAClB,QAAIC,UAAU,GAAG,IAAItE,OAAJ,CAAY;AAC3BoC,MAAAA,QAAQ,EAAE;AACRmC,QAAAA,IAAI,EAAE,UADE;AAERC,QAAAA,KAAK,EAAEJ,QAAQ,CAACK,QAAT,CAAkB,CAAlB,EAAqBrC,QAArB,CAA8BoC,KAA9B,CAAoC,CAApC,CAFC;AAGRE,QAAAA,IAAI,EAAE,IAHE;AAIRC,QAAAA,gBAAgB,EAAE;AAChBC,UAAAA,IAAI,EAAE;AADU;AAJV,OADiB;AAU3BzB,MAAAA,UAAU,EAAE;AACVC,QAAAA,QAAQ,EAAEgB,QAAQ,CAACK,QAAT,CAAkB,CAAlB,EAAqBtB,UAArB,CAAgCC,QADhC;AAEVyB,QAAAA,WAAW,EAAET,QAAQ,CAACK,QAAT,CAAkB,CAAlB,EAAqBtB,UAArB,CAAgC2B,SAFnC;AAGVC,QAAAA,aAAa,EAAEX,QAAQ,CAACK,QAAT,CAAkB,CAAlB,EAAqBtB,UAArB,CAAgC6B,MAHrC;AAIVC,QAAAA,cAAc,EAAEb,QAAQ,CAACK,QAAT,CAAkB,CAAlB,EAAqBtB,UAArB,CAAgC+B,OAJtC;AAKVC,QAAAA,OAAO,EAAEf,QAAQ,CAACK,QAAT,CAAkB,CAAlB,EAAqBtB,UAArB,CAAgCiC,SAL/B;AAMVC,QAAAA,QAAQ,EAAEjB,QAAQ,CAACK,QAAT,CAAkB,CAAlB,EAAqBtB,UAArB,CAAgCmC,SANhC;AAOVC,QAAAA,MAAM,EAAEnB,QAAQ,CAACK,QAAT,CAAkB,CAAlB,EAAqBtB,UAArB,CAAgCqC;AAP9B,OAVe;AAoB3BC,MAAAA,MAAM,EAAE;AACNlB,QAAAA,IAAI,EAAE,aADA;AAENmB,QAAAA,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,GAAP,CAFD;AAGNC,QAAAA,KAAK,EAAE,CAHD;AAINC,QAAAA,KAAK,EAAE;AAJD;AApBmB,KAAZ,CAAjB;AA2BA,QAAIC,YAAY,GAAG,EAAnB;AACAlG,IAAAA,MAAM,CAACyE,QAAP,CAAgB0B,GAAhB,CAAoBxB,UAApB;;AACA,SAAI,IAAIyB,EAAR,IAAcpG,MAAM,CAACyE,QAAP,CAAgB4B,KAA9B;AACE,UAAGrG,MAAM,CAACyE,QAAP,CAAgB4B,KAAhB,CAAsBD,EAAtB,EAA0B5C,UAA1B,KAAyC,IAA5C,EAAiD;AAC/C0C,QAAAA,YAAY,CAACI,IAAb,CAAkBtG,MAAM,CAACyE,QAAP,CAAgB4B,KAAhB,CAAsBD,EAAtB,EAA0B5C,UAA1B,CAAqCC,QAAvD;AACD;AAHH;;AAIE1D,IAAAA,SAAS,CAACwG,oBAAV,8BAAqDL,YAArD,8BAAqFzB,QAAQ,CAACK,QAAT,CAAkB,CAAlB,EAAqBtB,UAArB,CAAgCgD,OAArH;AACD;AACF;;AAED,gBAAsBC,YAAtB;AAAA;AAAA;;;0EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAGCC,YAAAA,aAHD,GAGiB,IAAIjG,OAAJ,CAAY,UAASC,GAAT,EAAa;AAC3CZ,cAAAA,IAAI,CAACqC,EAAL,CAAQ,OAAR,EAAiB,UAACwE,GAAD,EAAO;AACtB,oBAAI5D,IAAI,GAAG;AAACC,kBAAAA,OAAO,EAAEhD;AAAV,iBAAX;AACAF,gBAAAA,IAAI,CAACmD,OAAL,CAAa0D,GAAb,EAAkB5D,IAAlB,EAAwBG,IAAxB,CAA6B,UAASvB,QAAT,EAAkB;AAC7C;AACA,sBAAGA,QAAQ,CAACyB,OAAT,CAAiBlC,MAAjB,IAA2BS,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAApB,CAA4BgB,UAA5B,KAA2C,IAAzE,EAA8E;AAC5EoD,oBAAAA,aAAa,GAAGxG,cAAc,CAACmC,cAAf,CAA8BZ,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAApB,CAA4BC,QAA1D,EAAoE,OAApE,CAAhB;AACA,wBAAI2D,EAAE,GAAGzE,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAApB,CAA4BgB,UAA5B,CAAuC,UAAvC,CAAT;AACA3D,oBAAAA,MAAM,CAACgH,MAAP,CAAclF,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAAlC,EAA0C;AAACsE,sBAAAA,IAAI,EAAE;AAAP,qBAA1C;AACAjH,oBAAAA,MAAM,CAACsC,EAAP,CAAU,QAAV,EAAoB,UAACC,KAAD,EAAW;AAC7B,0BAAI2E,cAAJ;;AACA,0BAAG3E,KAAK,CAACE,KAAN,KAAgB,UAAhB,IAA8BF,KAAK,CAACqC,QAAN,CAAe,CAAf,EAAkBjB,UAAlB,CAA6B,UAA7B,MAA6C4C,EAA9E,EAAiF;AAC/EW,wBAAAA,cAAc,GAAG3G,cAAc,CAACmC,cAAf,CAA8BH,KAAK,CAACqC,QAAN,CAAe,CAAf,EAAkBhC,QAAhD,EAA0D,OAA1D,CAAjB;AACD;;AACD,0BAAG,OAAOmE,aAAP,KAAyB,QAAzB,IAAqC,OAAOG,cAAP,KAA0B,QAAlE,EAA2E;AACzE,4BAAIC,WAAW,GAAGJ,aAAa,GAAGG,cAAlC;;AACA,4BAAGH,aAAa,GAAGG,cAAnB,EAAkC;AAChC5F,0BAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAwF,0BAAAA,aAAa,GAAGK,SAAhB;AACAF,0BAAAA,cAAc,GAAGE,SAAjB;AACA,8BAAIC,QAAQ,GAAGC,IAAI,CAACC,GAAL,CAASJ,WAAT,CAAf;AACAtG,0BAAAA,GAAG,CAACwG,QAAD,CAAH;AACD,yBAND,MAOK,IAAIN,aAAa,GAAGG,cAApB,EAAmC;AACtC5F,0BAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAwF,0BAAAA,aAAa,GAAGK,SAAhB;AACAF,0BAAAA,cAAc,GAAGE,SAAjB;AACA,8BAAII,QAAQ,GAAG,CAACF,IAAI,CAACC,GAAL,CAASJ,WAAT,CAAhB;AACAtG,0BAAAA,GAAG,CAAC2G,QAAD,CAAH;AACD,yBANI,MAOA,IAAGT,aAAa,KAAKG,cAArB,EAAoC;AACvCH,0BAAAA,aAAa,GAAGK,SAAhB;AACAF,0BAAAA,cAAc,GAAGE,SAAjB;AACD;AACF;AACF,qBA1BD;AA2BD,mBA/BD,MAgCI;AACFpH,oBAAAA,MAAM,CAACgH,MAAP,CAAclF,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAAlC,EAA0C;AAACsE,sBAAAA,IAAI,EAAE;AAAP,qBAA1C;AACD;AACF,iBArCD;AAsCD,eAxCD;AAyCD,aA1CmB,CAHjB;AAAA;AAAA,mBA8CkBJ,aA9ClB;;AAAA;AA8CCY,YAAAA,QA9CD;AA+CHnG,YAAAA,OAAO,CAACC,GAAR,CAAYkG,QAAZ;AA/CG,8CAgDIA,QAhDJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAoDP,OAAO,SAASC,WAAT,GAAsB;AAC3B1H,EAAAA,MAAM,CAAC2H,MAAP;AACD;AAED,gBAAsBC,UAAtB;AAAA;AAAA;;;wEAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AACDC,YAAAA,cADC,GACgB,IAAIjH,OAAJ,CAAY,UAASC,GAAT,EAAa;AAC7CS,cAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACCtB,cAAAA,IAAI,CAACqC,EAAL,CAAQ,OAAR,EAAiB,UAACwE,GAAD,EAAO;AACvB,oBAAI5D,IAAI,GAAG;AAACC,kBAAAA,OAAO,EAAEhD;AAAV,iBAAX;AACAF,gBAAAA,IAAI,CAACmD,OAAL,CAAa0D,GAAb,EAAkB5D,IAAlB,EAAwBG,IAAxB,CAA6B,UAASvB,QAAT,EAAkB;AAC7C,sBAAGA,QAAQ,CAACyB,OAAT,CAAiBlC,MAAjB,IAA2BS,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAApB,CAA4BgB,UAA5B,KAA2C,IAAzE,EAA8E;AAC7ErD,oBAAAA,QAAQ,CAACwH,OAAT,GAAmBhG,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAApB,CAA4BgB,UAA5B,CAAuC,aAAvC,CAAnB;AACArD,oBAAAA,QAAQ,CAACyH,SAAT,GAAqBjG,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAApB,CAA4BgB,UAA5B,CAAuC,eAAvC,CAArB;AACArD,oBAAAA,QAAQ,CAAC0H,UAAT,GAAsBlG,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAApB,CAA4BgB,UAA5B,CAAuC,gBAAvC,CAAtB;AACArD,oBAAAA,QAAQ,CAAC2H,OAAT,GAAmBnG,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAApB,CAA4BgB,UAA5B,CAAuC,SAAvC,CAAnB;AACArD,oBAAAA,QAAQ,CAAC4H,WAAT,GAAuBpG,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAApB,CAA4BgB,UAA5B,CAAuC,UAAvC,CAAvB;AACArD,oBAAAA,QAAQ,CAAC6H,SAAT,GAAqBrG,QAAQ,CAACyB,OAAT,CAAiB,CAAjB,EAAoBZ,OAApB,CAA4BgB,UAA5B,CAAuC,QAAvC,CAArB;AACA9C,oBAAAA,GAAG,CAAC,CAAD,CAAH;AACAS,oBAAAA,OAAO,CAACC,GAAR,CAAYjB,QAAQ,CAACyH,SAArB;AACAzG,oBAAAA,OAAO,CAACC,GAAR,CAAYjB,QAAQ,CAAC0H,UAArB;AACA;AAEF,iBAbD;AAcD,eAhBA;AAiBD,aAnBoB,CADhB;AAAA;AAAA,mBAsBkBH,cAtBlB;;AAAA;AAsBDO,YAAAA,UAtBC;AAAA,8CAuBEA,UAvBF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["//import const from map.js\r\nimport {sketch, view, featLayer, gLayer, countyOfficialInfo} from '../Map/map'\r\nimport {cntyNbrNm} from '../../common/txCnt'\r\nimport {roadInfo} from '../../store'\r\n//esri js geometry engine import\r\nimport * as geometryEngine from \"@arcgis/core/geometry/geometryEngine\";\r\nimport Graphic from \"@arcgis/core/Graphic\";\r\nimport Query from \"@arcgis/core/rest/support/Query\";\r\n\r\n\r\n//add login info\r\n\r\n//get county name and road totals\r\nexport async function countyInfo(){\r\n  let countyInfoPromise =  new Promise(function(res){\r\n    let queryUrl = window.location.href\r\n    let crInfo = queryUrl.split('http://localhost:8080/')[1]\r\n    //console.log(crInfo.toString())\r\n    for (let j=0; j < cntyNbrNm.length; j++){\r\n      console.log(cntyNbrNm[j][crInfo])\r\n      if(cntyNbrNm[j][crInfo]){\r\n        let whereStatement = `County_NBR = '${crInfo}'`\r\n        console.log(whereStatement)\r\n        const query = new Query();\r\n        query.where = whereStatement\r\n        query.outFields = [ \"*\" ]\r\n        let newQuery = countyOfficialInfo.queryFeatures(query)\r\n        res({response:true, nbr:parseInt(crInfo), query:newQuery})\r\n      }\r\n      else{\r\n        res({response:false})\r\n      }\r\n    }\r\n    //let crValidation = /^[0-9]{1,3}$/\r\n  })\r\n  \r\n  let countyInfoReturn = await countyInfoPromise;\r\n  return countyInfoReturn\r\n}\r\n\r\nexport async function addRoadbed(){\r\n    return await new Promise(function(res){\r\n        sketch.create(\"polyline\",{mode:\"click\", hasZ: false})\r\n        sketch.on('create', (event) => {\r\n            let lengthMiles;\r\n            if(event.state === \"complete\"){\r\n                //console.log(\"This is the previous total length: \",this.previousTotal)\r\n                lengthMiles = geometryEngine.geodesicLength(event.graphic.geometry, \"miles\")\r\n                //addLen(lengthMiles);\r\n                console.log(\"This is the current line length: \", parseFloat(lengthMiles.toFixed(3)));\r\n                res(lengthMiles);\r\n            }\r\n        });\r\n    }) \r\n}\r\n\r\nexport async function modifyRoadbed(bool){\r\n  let promise = new Promise(function(res){\r\n    view.on(\"immediate-click\", (event) => {\r\n      let opts = { include: featLayer }\r\n      view.hitTest(event, opts).then(function(response){\r\n        for(let i=0; i < response.results.length; i++){\r\n          if(response.results[i].graphic.geometry !== null && response.results[i].graphic.sourceLayer !== null){\r\n            let queryFeat = featLayer.queryFeatures({\r\n              objectIds: [response.results[0].graphic.attributes.objectid],\r\n              outFields: [\"*\"],\r\n              returnGeometry: true,\r\n              returnM: true\r\n            })\r\n            queryFeat.then(result => res(result))\r\n          }\r\n        }\r\n      })\r\n    })\r\n  })\r\n\r\n  let feature = await promise;\r\n  defineGraphic(feature,bool)\r\n  return feature//geometryEngine.geodesicLength(feature.features[0].geometry, \"miles\")\r\n}\r\n\r\nexport function zoomExtents(){\r\n  view.on('mouse-wheel',() => {\r\n    console.log(view.zoom)\r\n    view.zoom < 9 ?  featLayer.visible = false : featLayer.visible = true;\r\n  })\r\n}\r\n\r\nexport function hightlightFeat(){\r\n  view.on('pointer-move', (event) => {\r\n    const opts = {include: featLayer}\r\n    view.hitTest(event, opts).then(function(response){\r\n      if (response.results.length) {\r\n        let editFeature = response.results[0].graphic;\r\n        view.whenLayerView(editFeature.layer).then(function(layerView){\r\n          let highlight = layerView.highlight(editFeature);\r\n          view.on('pointer-move', (event) => {\r\n            view.hitTest(event, opts).then(function(response){\r\n              if(response.results.length === 0){\r\n                highlight.remove()\r\n              }\r\n            })\r\n          })\r\n        })\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nfunction defineGraphic(graphics, dups){\r\n  if (dups === true){\r\n  let newGraphic = new Graphic({\r\n    geometry: {\r\n      type: \"polyline\",\r\n      paths: graphics.features[0].geometry.paths[0],\r\n      hasM: true,\r\n      spatialReference: {\r\n        wkid: 3857\r\n      }\r\n    },\r\n\r\n    attributes: {\r\n      objectid: graphics.features[0].attributes.objectid,\r\n      roadbedName: graphics.features[0].attributes.street_nm,\r\n      roadbedDesign: graphics.features[0].attributes.design,\r\n      roadbedSurface: graphics.features[0].attributes.surface,\r\n      numLane: graphics.features[0].attributes.num_lanes,\r\n      beginDfo: graphics.features[0].attributes.begin_dfo,\r\n      endDfo: graphics.features[0].attributes.end_dfo\r\n    },\r\n              \r\n    symbol: {\r\n      type: \"simple-line\",\r\n      color: [0, 0, 255],\r\n      width: 2,\r\n      style: \"dash\"\r\n    }\r\n  })\r\n  let objectidList = [];\r\n  gLayer.graphics.add(newGraphic);\r\n  for(let id in gLayer.graphics.items)\r\n    if(gLayer.graphics.items[id].attributes !== null){\r\n      objectidList.push(gLayer.graphics.items[id].attributes.objectid)\r\n    }\r\n    featLayer.definitionExpression = `OBJECTID not in (${objectidList}) and cnty_nm = '${graphics.features[0].attributes.cnty_nm}'`\r\n  }\r\n}\r\n\r\nexport async function updateLength(){\r\n    let oldlengthMile;\r\n    \r\n    let updatePromise = new Promise(function(res){\r\n      view.on('click', (evt)=>{\r\n        let opts = {include: gLayer}\r\n        view.hitTest(evt, opts).then(function(response){\r\n          //console.log(response)\r\n          if(response.results.length && response.results[0].graphic.attributes !== null){\r\n            oldlengthMile = geometryEngine.geodesicLength(response.results[0].graphic.geometry, \"miles\")\r\n            let id = response.results[0].graphic.attributes['objectid']\r\n            sketch.update(response.results[0].graphic,{tool: \"reshape\"})\r\n            sketch.on('update', (event) => {\r\n              let newlengthMiles;\r\n              if(event.state === \"complete\" && event.graphics[0].attributes['objectid'] === id){\r\n                newlengthMiles = geometryEngine.geodesicLength(event.graphics[0].geometry, \"miles\")\r\n              }\r\n              if(typeof oldlengthMile === \"number\" && typeof newlengthMiles === \"number\"){\r\n                let deltaLength = oldlengthMile - newlengthMiles\r\n                if(oldlengthMile < newlengthMiles){\r\n                  console.log('add')\r\n                  oldlengthMile = undefined\r\n                  newlengthMiles = undefined\r\n                  let addMiles = Math.abs(deltaLength)\r\n                  res(addMiles)\r\n                }\r\n                else if (oldlengthMile > newlengthMiles){\r\n                  console.log('sub')\r\n                  oldlengthMile = undefined\r\n                  newlengthMiles = undefined\r\n                  let subMiles = -Math.abs(deltaLength)\r\n                  res(subMiles)\r\n                }\r\n                else if(oldlengthMile === newlengthMiles){\r\n                  oldlengthMile = undefined\r\n                  newlengthMiles = undefined\r\n                }\r\n              }\r\n            })\r\n          }\r\n          else{\r\n            sketch.update(response.results[0].graphic,{tool: \"reshape\"})\r\n          }\r\n        })\r\n      })\r\n    });\r\n    let mileages = await updatePromise;\r\n    console.log(mileages)\r\n    return mileages\r\n}\r\n\r\n\r\nexport function stopEditing(){\r\n  sketch.cancel()\r\n}\r\n\r\nexport async function getGraphic(){\r\n  let graphicPromise = new Promise(function(res){\r\n   console.log(\"yes\")\r\n    view.on('click', (evt)=>{\r\n     let opts = {include: gLayer}\r\n     view.hitTest(evt, opts).then(function(response){\r\n       if(response.results.length && response.results[0].graphic.attributes !== null){\r\n        roadInfo.getName = response.results[0].graphic.attributes['roadbedName']\r\n        roadInfo.getDesign = response.results[0].graphic.attributes['roadbedDesign']\r\n        roadInfo.getSurface = response.results[0].graphic.attributes['roadbedSurface']\r\n        roadInfo.getLane = response.results[0].graphic.attributes['numLane']\r\n        roadInfo.getbeginDfo = response.results[0].graphic.attributes['beginDfo']\r\n        roadInfo.getendDfo = response.results[0].graphic.attributes['endDfo']\r\n        res(1)\r\n        console.log(roadInfo.getDesign)\r\n        console.log(roadInfo.getSurface)\r\n       }\r\n       \r\n     })\r\n   })\r\n  })\r\n  \r\n  let returnAttr = await graphicPromise\r\n  return returnAttr\r\n}\r\n"]}]}